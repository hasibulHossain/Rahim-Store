(this["webpackJsonprahim-store"]=this["webpackJsonprahim-store"]||[]).push([[0],{33:function(e,t,r){},34:function(e,t,r){},39:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){"use strict";r.r(t);var c=r(1),n=r(0),a=r.n(n),i=r(15),s=r.n(i),o=(r(33),r(34),r(8)),l=r(3),d=r(11);r(39);var u=function(){return Object(c.jsx)("nav",{className:"bg-gray-300 mb-20",children:Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{className:"text-3xl text-blue-600",children:"\u211dahim Store"}),Object(c.jsx)("li",{className:"text-lg",children:Object(c.jsx)(d.b,{to:"/",exact:!0,children:"Home"})}),Object(c.jsx)("li",{className:"text-lg",children:Object(c.jsx)(d.b,{to:"/add-product",children:"Add product"})})]})})};var b=function(e){var t=e.children;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(u,{}),Object(c.jsx)("main",{className:"bg-gradient-to-br from-teal-400 to-cyan-500 h-screen",children:t})]})},p=r(26),j=r.n(p),m="INIT",h="FETCH_PRODUCT_COMPLETE",f="DELETE_PRODUCT",x="EDIT_PRODUCT_INIT",O="EDIT_PRODUCT",g="SUBMIT_EDIT_PRODUCT",y="ADD_PRODUCT",v="ADD_PRODUCT_FINISH",N="ADD_PRODUCT_INIT",P="//rahim-store-api.herokuapp.com",D=function(){return function(e){e({type:m}),fetch("".concat(P,"/shop/products")).then((function(e){return e.json()})).then((function(t){e(function(e){return{type:h,payload:e}}(t.products))}))}},w=function(e){var t=new FormData;return t.append("name",e.name),t.append("price",e.price),t.append("expiryDate",e.expiryDate),t.append("image",e.image),function(e){e({type:N}),fetch("".concat(P,"/shop/product"),{method:"POST",body:t}).then((function(t){return e({type:v}),t.json()})).then((function(t){e(function(e){return{type:y,payload:e}}(t.product))}))}};r(42);var T=Object(o.b)(null,(function(e){return{deleteProduct:function(t){return e(function(e){return function(t){fetch("".concat(P,"/shop/product/").concat(e),{method:"DELETE"}).then((function(r){t({type:f,payload:e})}))}}(t))},getEditProduct:function(t){return e(function(e){return function(t){t({type:x}),fetch("".concat(P,"/shop/product/").concat(e)).then((function(e){return e.json()})).then((function(e){t({type:O,payload:e.product})}))}}(t))}}}))(Object(l.f)((function(e){var t=j()(e.expiryDate).format("DD, MMM, YYYY");return Object(c.jsxs)("li",{className:"flex mb-12 bg-white shadow-lg rounded-t-lg rounded-l-lg product-width",children:[Object(c.jsxs)("div",{className:"relative flex-shrink-0 w-64 h-full bg-gray-200 ",children:[Object(c.jsx)("svg",{className:"text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"images"===e.imageUrl.split("/")[1]&&Object(c.jsx)("img",{src:"//rahim-store-api.herokuapp.com".concat(e.imageUrl),alt:e.name,className:"absolute inset-0 w-full h-full object-cover rounded-l-lg"})]}),Object(c.jsxs)("div",{className:"p-8 flex-auto flex-shrink bg-gray-50 rounded-r-lg",children:[Object(c.jsxs)("div",{className:"product-info",children:[Object(c.jsxs)("div",{className:"flex justify-between mb-4",children:[Object(c.jsx)("div",{className:"w-10/12",children:Object(c.jsx)("h1",{className:"capitalize text-2xl font-semibold mb-3",children:e.name})}),Object(c.jsxs)("div",{className:"flex item-center font-semibold text-gray-500 mr-2 text-3xl",children:[Object(c.jsx)("strong",{className:"text-lg",children:"\u09f3"}),Object(c.jsx)("p",{children:e.price})]})]}),Object(c.jsxs)("div",{className:"font-medium mb-4",children:["Expiry Date:",Object(c.jsx)("span",{className:"pl-2",children:t})]})]}),Object(c.jsxs)("div",{className:"flex mt-8 xl:w-full",children:[Object(c.jsx)("button",{className:"btn-edit w-20 p-2 mr-4 border rounded-lg bg-blue-600 ring ring-transparent focus:ring-blue-300 text-white",type:"button",onClick:function(){return e.history.push({pathname:"/edit-product"}),e.getEditProduct(e.id)},children:"Edit"}),Object(c.jsx)("button",{className:"btn-dlt w-20 p-2 border rounded-md text-white ring ring-transparent bg-red-600 focus:ring-red-300",type:"button",onClick:function(){return e.deleteProduct(e.id)},children:"Delete"})]})]})]})})));var E=Object(o.b)((function(e){return{productsArr:e.productsRTR.products,loading:e.productsRTR.loading}}))((function(e){var t;return 0===e.productsArr.length&&(t=Object(c.jsx)("p",{style:{textAlign:"center",fontSize:"4rem"},children:"Product list is empty"})),e.loading?Object(c.jsx)("p",{style:{textAlign:"center",fontSize:"4rem"},children:"loading..."}):(e.productsArr||(t=Object(c.jsx)("p",{style:{textAlign:"center",fontSize:"4rem"},children:"Refresh browser \u2639 "})),e.productsArr.length>0&&(t=Object(c.jsx)("ul",{className:"flex flex-col justify-center items-center p-4",children:e.productsArr.map((function(e){return Object(c.jsx)(T,{name:e.name,price:e.price,imageUrl:e.imageUrl,expiryDate:e.expiryDate,id:e._id},e._id)}))})),t)})),k=r(17),R=r(10);r(43);var C=Object(o.b)((function(e){return{finishAddProduct:e.productsRTR.isProductAdded}}),(function(e){return{addProductInit:function(t){return e(w(t))}}}))(Object(l.f)((function(e){var t=Object(n.useState)(""),r=Object(R.a)(t,2),a=r[0],i=r[1],s=Object(n.useState)(0),o=Object(R.a)(s,2),l=o[0],d=o[1],u=Object(n.useState)(""),b=Object(R.a)(u,2),p=b[0],j=b[1],m=Object(n.useState)(null),h=Object(R.a)(m,2),f=h[0],x=h[1];return Object(c.jsx)("div",{className:"flex justify-center",children:Object(c.jsxs)("form",{className:"w-2/6",onSubmit:function(t){var r;if(t.preventDefault(),f){var c,n=Object(k.a)(f);try{for(n.s();!(c=n.n()).done;){r=c.value}}catch(s){n.e(s)}finally{n.f()}}else console.log("from add product else block >>>>"),r="";var i={name:a,price:+l,expiryDate:p,image:r};e.addProductInit(i),e.history.push({pathname:"/"})},children:[Object(c.jsxs)("div",{className:"mb-8",children:[Object(c.jsx)("label",{className:"block pb-2",htmlFor:"name",children:"Name"}),Object(c.jsx)("input",{className:"w-full py-2 px-4 border-b-2 border-transparent rounded bg-gray-100 focus:border-blue-600 ",type:"text",name:"name",placeholder:"Product Name",onChange:function(e){return i(e.target.value)},required:!0})]}),Object(c.jsxs)("div",{className:"mb-8",children:[Object(c.jsx)("label",{className:"block pb-2",htmlFor:"price",children:"Price"}),Object(c.jsx)("input",{className:"w-full py-2 px-4 border-b-2 rounded bg-gray-100 focus:border-blue-600 border-transparent",type:"text",name:"price",placeholder:"Product Price",onChange:function(e){return d(e.target.value)},required:!0})]}),Object(c.jsxs)("div",{className:"mb-8",children:[Object(c.jsx)("label",{className:"block pb-2",htmlFor:"expiry-date",children:"Expiry Date"}),Object(c.jsx)("input",{className:"w-full py-2 px-4 rounded bg-gray-100",type:"date",name:"expiry-date",onChange:function(e){return j(e.target.value)},required:!0})]}),Object(c.jsxs)("div",{className:"mb-8",children:[Object(c.jsx)("label",{className:"block pb-2",htmlFor:"image",children:"Image"}),Object(c.jsx)("input",{className:"w-full py-2 px-4 border-b-2 rounded bg-gray-100 border-gray-200",type:"file",accept:".jpg, .jpeg, .png",name:"image",onChange:function(e){return x(e.target.files)}})]}),Object(c.jsx)("button",{className:"bg-blue-600 py-1 px-6 ring focus:ring-4 rounded text-white",type:"submit",children:"submit"})]})})})));var S=Object(o.b)((function(e){return{editProduct:e.productsRTR.editProduct,loading:e.productsRTR.loading}}),(function(e){return{submitEditProduct:function(t,r){return e(function(e,t){var r=new FormData;return r.append("name",e.name),r.append("price",e.price),r.append("expiryDate",e.expiryDate),r.append("image",e.image),console.log("image>>>>>>> ",e.image),function(e){fetch("".concat(P,"/shop/product/").concat(t),{method:"PUT",body:r}).then((function(e){return e.json()})).then((function(t){e({type:g,payload:t.product})}))}}(t,r))}}}))(Object(l.f)((function(e){var t=Object(n.useState)(""),r=Object(R.a)(t,2),a=r[0],i=r[1],s=Object(n.useState)(0),o=Object(R.a)(s,2),l=o[0],d=o[1],u=Object(n.useState)(""),b=Object(R.a)(u,2),p=b[0],j=b[1],m=Object(n.useState)(null),h=Object(R.a)(m,2),f=h[0],x=h[1],O=e.editProduct[0];return Object(n.useEffect)((function(){O&&(d(O.price),j(O.expiryDate),i(O.name))}),[O]),e.loading?Object(c.jsx)("p",{style:{textAlign:"center",fontSize:"4rem"},children:"loading..."}):Object(c.jsx)("div",{className:"flex justify-center",children:Object(c.jsxs)("form",{className:"w-2/6",onSubmit:function(t){var r;if(t.preventDefault(),f){var c,n=Object(k.a)(f);try{for(n.s();!(c=n.n()).done;)r=c.value}catch(s){n.e(s)}finally{n.f()}}else console.log("from eddit image else block>>>"),r=O.imageUrl;var i={name:a,price:+l,expiryDate:p,image:r};e.submitEditProduct(i,O._id),e.history.push({pathname:"/"})},children:[Object(c.jsxs)("div",{className:"mb-8",children:[Object(c.jsx)("label",{className:"block pb-2",htmlFor:"name",children:"Name"}),Object(c.jsx)("input",{className:"w-full py-2 px-4 border-b-2 rounded bg-gray-100 focus:border-blue-600 border-transparent",type:"text",value:a,name:"name",placeholder:"Product Name",onChange:function(e){return i(e.target.value)},required:!0})]}),Object(c.jsxs)("div",{className:"mb-8",children:[Object(c.jsx)("label",{className:"block pb-2",htmlFor:"price",children:"Price"}),Object(c.jsx)("input",{className:"w-full py-2 px-4 border-b-2 rounded bg-gray-100 focus:border-blue-600 border-transparent",type:"text",value:l,name:"price",placeholder:"Product Price",onChange:function(e){return d(e.target.value)},required:!0})]}),Object(c.jsxs)("div",{className:"mb-8",children:[Object(c.jsx)("label",{className:"block pb-2",htmlFor:"expiry-date",children:"Expiry Date"}),Object(c.jsx)("input",{className:"w-full py-2 px-4 rounded bg-gray-100",type:"date",value:p,name:"expiry-date",onChange:function(e){return j(e.target.value)},required:!0})]}),Object(c.jsxs)("div",{className:"mb-8",children:[Object(c.jsx)("label",{className:"block pb-2",htmlFor:"image",children:"Image"}),Object(c.jsx)("input",{className:"w-full py-2 px-4 border-b-2 rounded bg-gray-100 focus:border-blue-600 border-transparent",type:"file",accept:".jpg, .jpeg, .png",name:"image",onChange:function(e){return x(e.target.files)}})]}),Object(c.jsx)("button",{className:"bg-blue-600 py-1 px-6 ring focus:ring-4 rounded text-white",type:"submit",children:"submit"})]})})})));var _=Object(o.b)(null,(function(e){return{fetchProducts:function(){return e(D())}}}))((function(e){Object(n.useEffect)((function(){e.fetchProducts()}),[]);var t=Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{path:"/",exact:!0,children:Object(c.jsx)(E,{})}),Object(c.jsx)(l.a,{path:"/add-product",children:Object(c.jsx)(C,{})}),Object(c.jsx)(l.a,{path:"/edit-product",children:Object(c.jsx)(S,{})})]});return Object(c.jsx)(b,{children:t})})),A=r(12),I=r(27),U=r(4),F={products:[],editProduct:[],isProductAdded:!1,inEditPage:!1,loading:!1},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(U.a)(Object(U.a)({},e),{},{loading:!0});case h:return Object(U.a)(Object(U.a)({},e),{},{loading:!1,products:t.payload});case f:return Object(U.a)(Object(U.a)({},e),{},{products:e.products.filter((function(e){return e._id!==t.payload}))});case N:return Object(U.a)(Object(U.a)({},e),{},{loading:!0});case v:return Object(U.a)(Object(U.a)({},e),{},{loading:!1,isProductAdded:!0,inEditPage:!1,editProduct:[]});case y:return Object(U.a)(Object(U.a)({},e),{},{isProductAdded:!1,products:e.products.concat(t.payload)});case x:return Object(U.a)(Object(U.a)({},e),{},{loading:!0});case O:return Object(U.a)(Object(U.a)({},e),{},{loading:!1,editProduct:[t.payload]});case g:var r=e.products.filter((function(e){return e._id!==t.payload._id})),c=r.concat(t.payload);return Object(U.a)(Object(U.a)({},e),{},{loading:!1,products:c});default:return e}},L=Object(A.c)({productsRTR:M}),q=A.d,z=Object(A.e)(L,q(Object(A.a)(I.a)));s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(o.a,{store:z,children:Object(c.jsx)(d.a,{basename:"/Rahim-Store",children:Object(c.jsx)(_,{})})})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.cf7967c3.chunk.js.map